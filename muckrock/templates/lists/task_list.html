{% extends 'lists/base_list.html' %}
{% load static from staticfiles %}
{% load task_tags %}
{% load tags %}


{% block title %}MuckRock &bull; Tasks{% endblock title %}
{% block type %}task{% endblock type %}

{% block list-sections %}
<section class="list-sections">
    <ul>
        <li class="{% active request '^/task/$' %}">
            <span class="counter">{{ counters.all }}</span>
            <a href="{% url 'task-list' %}">All</a>
        </li>
        <li class="{% active request '^/task/orphan/$' %}">
            <span class="counter">{{ counters.orphan }}</span>
            <a href="{% url 'orphan-task-list' %}">Orphan</a>
        </li>
        <li class="{% active request '^/task/snail-mail/$' %}">
            <span class="counter">{{ counters.snail_mail }}</span>
            <a href="{% url 'snail-mail-task-list' %}">Snail Mail</a>
        </li>
        <li class="{% active request '^/task/rejected-email/$' %}">
            <span class="counter">{{ counters.rejected }}</span>
            <a href="{% url 'rejected-email-task-list' %}">Rejected Email</a>
        </li>
        <li class="{% active request '^/task/stale-agency/$' %}">
            <span class="counter">{{ counters.stale_agency }}</span>
            <a href="{% url 'stale-agency-task-list' %}">Stale Agency</a>
        </li>
        <li class="{% active request '^/task/flagged/$' %}">
            <span class="counter">{{ counters.flagged }}</span>
            <a href="{% url 'flagged-task-list' %}">Flagged</a>
        </li>
        <li class="{% active request '^/task/new-agency/$' %}">
            <span class="counter">{{ counters.new_agency }}</span>
            <a href="{% url 'new-agency-task-list' %}">New Agency</a>
        </li>
        <li class="{% active request '^/task/response/$' %}">
            <span class="counter">{{ counters.response }}</span>
            <a href="{% url 'response-task-list' %}">Response</a>
        </li>
        <li class="{% active request '^/task/payment/$' %}">
            <span class="counter">{{ counters.payment }}</span>
            <a href="{% url 'payment-task-list' %}">Payment</a>
        </li>
        <li class="{% active request '^/task/crowdfund/$' %}">
            <span class="counter">{{ counters.crowdfund }}</span>
            <a href="{% url 'crowdfund-task-list' %}">Crowdfund</a>
        </li>
        <li class="{% active request '^/task/multirequest/$' %}">
            <span class="counter">{{ counters.multirequest }}</span>
            <a href="{% url 'multirequest-task-list' %}">Multi-Request</a>
        </li>
        <li class="{% active request '^/task/status-change/$' %}">
            <span class="counter">{{ counters.status_change }}</span>
            <a href="{% url 'status-change-task-list' %}">Status Change</a>
        </li>
        <li class="{% active request '^/task/failed-fax/$' %}">
            <span class="counter">{{ counters.failed_fax }}</span>
            <a href="{% url 'failed-fax-task-list' %}">Failed Fax</a>
        </li>
    </ul>
</section>
{% endblock %}

{% block list-filters %}
{{ filter_form.show_resolved }}
<label for="{{ filter_form.show_resolved.id_for_label }}">{{ filter_form.show_resolved.label }}</label>
{{ filter_form.resolved_by }}
{% endblock %}

{% block list-content %}
    <section class="list-actions">
        <div>
            <input type="checkbox" onClick="selectAll(this, 'tasks')" />
            <label for="toggle-all">Select/Unselect All</label>
        </div>
        <form method="POST" id="batched">
            {% csrf_token %}
            {% if bulk_actions %}
                {% for bulk_action in bulk_actions %}
            <button type="submit" name="{{bulk_action}}" value="true" id="batched-{{bulk_action}}">{{bulk_action|title}}</button>
                {% endfor %}
            {% endif %}
            <button id="collapse-all">Collapse All</button>
        </form>
    </section>
    {% if object_list %}
        {% include 'lib/pagination.html' %}
        {% for task in object_list %}
            {% include 'lib/task.html' %}
        {% endfor %}
        {% include 'lib/pagination.html' %}
    {% endif %}
{% endblock list-content %}

